<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>OmniWebchat - Support Chat</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Access Code Overlay -->
    <div class="access-overlay" id="accessOverlay">
        <div class="access-modal">
            <h2>üîí Access Required</h2>
            <p>Please enter the access code to view this page.</p>
            <input type="password" id="accessCode" placeholder="Enter access code" autocomplete="off">
            <button onclick="checkAccessCode()">Submit</button>
            <p class="error-message" id="errorMessage">Incorrect access code. Please try again.</p>
        </div>
    </div>
    
    <!-- Main Content (hidden by default) -->
    <div class="content-wrapper" id="contentWrapper">
        <div class="container">
        <h1>üó®Ô∏è OmniWebchat Support</h1>
        <p class="subtitle">AI-Powered Support for Young People</p>
        
        <div class="description">
            <h2>Welcome to KHL Web Chat</h2>
            <p>We're here to help children and young people with family-related support and counselling. Our service provides:</p>
            <ul>
                <li>Safe and confidential chat support</li>
                <li>AI-assisted initial guidance</li>
                <li>Connection to trained support agents</li>
                <li>Emergency detection and response</li>
                <li>Access to helpful resources</li>
            </ul>
        </div>
        
        <div class="environment-selector">
            <h3>Choose Environment</h3>
            <div class="environment-options">
                <div class="environment-option selected" onclick="selectEnvironment('dev')">
                    <input type="radio" name="environment" id="env-dev" value="dev" checked>
                    <label for="env-dev">
                        <div class="environment-name">Development (DEV)</div>
                        <div class="environment-description">Development environment for testing</div>
                    </label>
                </div>
                <div class="environment-option" onclick="selectEnvironment('uat')">
                    <input type="radio" name="environment" id="env-uat" value="uat">
                    <label for="env-uat">
                        <div class="environment-name">User Acceptance Testing (UAT)</div>
                        <div class="environment-description">Pre-production testing environment</div>
                    </label>
                </div>
                <div class="environment-option" onclick="selectEnvironment('prd')">
                    <input type="radio" name="environment" id="env-prd" value="prd">
                    <label for="env-prd">
                        <div class="environment-name">Production (PRD)</div>
                        <div class="environment-description">Live production environment</div>
                    </label>
                </div>
            </div>
        </div>
        
        <div class="agent-selector">
            <h3>Choose Your Support Agent</h3>
            <div class="agent-options">
                <div class="agent-option selected" onclick="selectAgent('default')">
                    <input type="radio" name="agent" id="agent-default" value="default" checked>
                    <label for="agent-default">
                        <div class="agent-name">Default Support Agent</div>
                        <div class="agent-description">General support for all family-related queries and counselling</div>
                    </label>
                </div>
                <div class="agent-option" onclick="selectAgent('specialist')">
                    <input type="radio" name="agent" id="agent-specialist" value="specialist">
                    <label for="agent-specialist">
                        <div class="agent-name">Support Agent with Custom Instruction</div>
                        <div class="agent-description">Experimental</div>
                    </label>
                </div>
            </div>
        </div>
        
        <div class="visitor-info">
            <h3>üìç Visitor Information</h3>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">IP Address:</span>
                    <span class="info-value" id="visitorIP">Loading...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Device Type:</span>
                    <span class="info-value" id="visitorDevice">Loading...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Location:</span>
                    <span class="info-value" id="visitorLocation">Loading...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Coordinates:</span>
                    <span class="info-value" id="visitorCoordinates">Loading...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Browser:</span>
                    <span class="info-value" id="visitorBrowser">Loading...</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Session Started:</span>
                    <span class="info-value" id="sessionTime">Loading...</span>
                </div>
            </div>
        </div>

        <div class="chat-info">
            <p><span class="status-indicator"></span><strong>Chat Available</strong></p>
            <p>Click the chat button in the bottom right corner to start a conversation.</p>
            <p>Our AI agent will guide you through the process and connect you with a support agent when needed.</p>
        </div>
        
        <div class="footer">
            <p><strong>Emergency?</strong> If you or someone you know is in immediate danger, please call 000.</p>
            <p style="margin-top: 10px;">OmniWebchat - Powered by Dynamics 365 Contact Centre</p>
        </div>
    </div>
    </div>

    <!-- JavaScript -->
    <script src="js/chat-widget.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
